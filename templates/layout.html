<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{define "title"}}DukaPOS{{end}} - WhatsApp POS for Kenyan Shops</title>
    <meta name="description" content="Manage your duka from WhatsApp. Track stock, record sales, reconcile M-Pesa. No app download. Start free in 3 minutes.">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#00A650',
                        'primary-dark': '#059669',
                        'primary-light': '#34D399',
                        'primary-50': '#ECFDF5',
                        'primary-100': '#D1FAE5',
                        'primary-500': '#10B981',
                        mpesa: '#FDB913',
                        trust: '#1E40AF',
                        success: '#10B981',
                        warning: '#F59E0B',
                        danger: '#EF4444',
                        'danger-light': '#FEE2E2',
                        'surface': '#FFFFFF',
                        'surface-dark': '#F8FAFC',
                        'surface-elevated': '#FFFFFF',
                        'border-light': '#E2E8F0',
                        'border-subtle': '#F1F5F9',
                        'text-primary': '#0F172A',
                        'text-secondary': '#64748B',
                        'text-tertiary': '#94A3B8',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    boxShadow: {
                        'card': '0 1px 3px 0 rgb(0 0 0 / 0.05), 0 1px 2px -1px rgb(0 0 0 / 0.05)',
                        'card-hover': '0 10px 15px -3px rgb(0 0 0 / 0.07), 0 4px 6px -4px rgb(0 0 0 / 0.05)',
                        'elevated': '0 4px 6px -1px rgb(0 0 0 / 0.08), 0 2px 4px -2px rgb(0 0 0 / 0.08)',
                        'float': '0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1)',
                    },
                    backgroundImage: {
                        'gradient-primary': 'linear-gradient(135deg, #00A650 0%, #059669 100%)',
                        'gradient-primary-reverse': 'linear-gradient(135deg, #059669 0%, #00A650 100%)',
                        'gradient-surface': 'linear-gradient(to bottom right, #FFFFFF, #F8FAFC)',
                        'gradient-mesh': 'radial-gradient(at 40% 20%, hsla(150,80%,90%,0.3) 0px, transparent 50%), radial-gradient(at 80% 0%, hsla(190,80%,85%,0.2) 0px, transparent 50%), radial-gradient(at 0% 50%, hsla(220,80%,90%,0.2) 0px, transparent 50%)',
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-out',
                        'slide-up': 'slideUp 0.5s ease-out',
                        'slide-down': 'slideDown 0.3s ease-out',
                        'scale-in': 'scaleIn 0.2s ease-out',
                        'shimmer': 'shimmer 2s infinite linear',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        slideDown: {
                            '0%': { opacity: '0', transform: 'translateY(-10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        scaleIn: {
                            '0%': { opacity: '0', transform: 'scale(0.95)' },
                            '100%': { opacity: '1', transform: 'scale(1)' },
                        },
                        shimmer: {
                            '0%': { backgroundPosition: '-200% 0' },
                            '100%': { backgroundPosition: '200% 0' },
                        },
                    }
                }
            }
        }
    </script>
    
    <style>
        body { font-family: 'Inter', sans-serif; }
        .glass { background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(12px); }
        .bg-mesh { background-image: radial-gradient(at 40% 20%, hsla(150,80%,90%,0.3) 0px, transparent 50%), radial-gradient(at 80% 0%, hsla(190,80%,85%,0.2) 0px, transparent 50%), radial-gradient(at 0% 50%, hsla(220,80%,90%,0.2) 0px, transparent 50%); }
        .card { @apply bg-white rounded-2xl shadow-card border border-border-light transition-all duration-300; }
        .card:hover { @apply shadow-card-hover; }
        .btn-primary { @apply bg-gradient-primary text-white px-4 py-2 rounded-xl font-medium transition-all duration-200 hover:shadow-elevated hover:-translate-y-0.5; }
        .btn-secondary { @apply bg-white text-gray-700 px-4 py-2 rounded-xl font-medium border border-gray-200 transition-all duration-200 hover:bg-gray-50 hover:border-gray-300; }
    </style>
    
    {{define "head"}}{{end}}
</head>
<body class="min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100">
    {{define "navbar"}}
    <nav class="bg-white/80 backdrop-blur-xl border-b border-gray-200/50 sticky top-0 z-50 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <a href="/" class="flex items-center gap-3">
                        <div class="w-10 h-10 bg-gradient-primary rounded-xl flex items-center justify-center shadow-lg shadow-primary-500/25">
                            <i data-lucide="shopping-bag" class="text-white w-5 h-5"></i>
                        </div>
                        <span class="text-xl font-bold text-gray-900">DukaPOS</span>
                    </a>
                </div>
                <div class="flex items-center gap-2">
                    {{if .IsAuthenticated}}
                        <a href="/dashboard" class="text-gray-600 hover:text-gray-900 px-3 py-2 rounded-xl hover:bg-gray-100/80 transition-all">Dashboard</a>
                        <a href="/products" class="text-gray-600 hover:text-gray-900 px-3 py-2 rounded-xl hover:bg-gray-100/80 transition-all">Products</a>
                        <a href="/sales" class="text-gray-600 hover:text-gray-900 px-3 py-2 rounded-xl hover:bg-gray-100/80 transition-all">Sales</a>
                        <span class="text-gray-400 mx-2">|</span>
                        <span class="px-3 py-1.5 bg-primary-50 text-primary-dark rounded-lg text-sm font-medium">{{.ShopName}}</span>
                        <a href="/logout" class="text-red-600 hover:text-red-700 px-3 py-2 rounded-xl hover:bg-red-50 transition-all ml-2">Logout</a>
                    {{else}}
                        <a href="/login" class="text-gray-600 hover:text-gray-900 px-4 py-2 rounded-xl font-medium hover:bg-gray-100 transition-all">Login</a>
                        <a href="/register" class="bg-gradient-primary text-white px-5 py-2.5 rounded-xl hover:shadow-lg hover:shadow-primary-500/25 hover:-translate-y-0.5 font-medium transition-all">Get Started</a>
                    {{end}}
                </div>
            </div>
        </div>
    </nav>
    {{end}}

    {{template "navbar" .}}
    
    <main>
        {{template "content" .}}
    </main>

    {{define "footer"}}
    <footer class="bg-gray-900 text-gray-400 py-12 mt-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <div class="flex items-center gap-3 mb-4">
                        <div class="w-10 h-10 bg-primary rounded-xl flex items-center justify-center">
                            <i data-lucide="shopping-bag" class="text-white w-5 h-5"></i>
                        </div>
                        <span class="text-xl font-bold text-white">DukaPOS</span>
                    </div>
                    <p class="text-sm">WhatsApp POS for Kenyan Shops. Manage your duka from your phone.</p>
                </div>
                <div>
                    <h4 class="text-white font-semibold mb-4">Product</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#" class="hover:text-white transition">Features</a></li>
                        <li><a href="#" class="hover:text-white transition">Pricing</a></li>
                        <li><a href="#" class="hover:text-white transition">API</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-white font-semibold mb-4">Company</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#" class="hover:text-white transition">About</a></li>
                        <li><a href="#" class="hover:text-white transition">Blog</a></li>
                        <li><a href="#" class="hover:text-white transition">Contact</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-white font-semibold mb-4">Legal</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#" class="hover:text-white transition">Privacy</a></li>
                        <li><a href="#" class="hover:text-white transition">Terms</a></li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-800 mt-8 pt-8 text-sm text-center">
                <p>&copy; 2026 DukaPOS. Made with ðŸ‡°ðŸ‡ª for Kenyan Businesses.</p>
            </div>
        </div>
    </footer>
    {{end}}
    
    <script>
        lucide.createIcons();
        
        // Global error handler
        window.onerror = function(message, source, lineno, colno, error) {
            console.error('Global error:', {message, source, lineno, colno, error});
            return false;
        };
        
        // Unhandled promise rejection handler
        window.addEventListener('unhandledrejection', function(event) {
            console.error('Unhandled rejection:', event.reason);
            event.preventDefault();
        });
    </script>
    
    {{define "scripts"}}{{end}}
</body>
</html>
